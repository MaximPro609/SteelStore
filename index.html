<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SteelStore - MaximPro609 Edition</title>
    <style>
        :root { --main-blue: #00d4ff; --bg: #0b0e14; --card: #1b2838; --header: #171a21; --safe: #a3d200; --error: #ff4b2b; }
        body { background: var(--bg); color: #c7d5e0; font-family: 'Segoe UI', sans-serif; margin: 0; overflow-x: hidden; }
        header { background: var(--header); padding: 10px 30px; display: flex; justify-content: space-between; border-bottom: 2px solid var(--main-blue); align-items: center; }
        .container { padding: 20px; max-width: 1000px; margin: auto; }
        .safe-banner { background: rgba(0, 212, 255, 0.05); border: 1px solid #233c51; padding: 8px 15px; border-radius: 4px; font-size: 11px; margin-bottom: 20px; color: var(--main-blue); font-weight: bold; text-transform: uppercase; letter-spacing: 1px; }
        .publish-form { background: #1c2d3d; padding: 25px; border-radius: 8px; border: 1px solid var(--main-blue); margin-bottom: 30px; }
        input, select { width: 100%; padding: 12px; background: #000; border: 1px solid #333; color: white; border-radius: 4px; box-sizing: border-box; margin-top: 8px; }
        .btn-pub { background: var(--safe); color: black; font-weight: bold; width: 100%; padding: 12px; border: none; border-radius: 4px; margin-top: 20px; cursor: pointer; transition: 0.3s; }
        .btn-pub:hover { opacity: 0.8; transform: translateY(-2px); }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
        .card { background: var(--card); padding: 20px; border-radius: 6px; border: 1px solid #233c51; position: relative; transition: 0.3s; }
        .card:hover { border-color: var(--main-blue); box-shadow: 0 0 15px rgba(0,212,255,0.2); }
        .mod-section { background: rgba(255, 165, 0, 0.1); border: 1px dashed orange; padding: 15px; margin-bottom: 30px; display: none; border-radius: 8px; }
        .mod-item { background: #000; padding: 12px; margin-top: 10px; border-radius: 4px; display: flex; justify-content: space-between; align-items: center; border-left: 4px solid orange; }
        .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); display: none; justify-content: center; align-items: center; z-index: 1000; }
        .modal-box { background: var(--card); padding: 30px; border: 1px solid var(--main-blue); border-radius: 8px; width: 320px; box-shadow: 0 0 30px rgba(0,0,0,0.5); }
        .age-badge { position: absolute; top: 10px; right: 10px; background: #333; padding: 2px 8px; border-radius: 3px; font-size: 10px; font-weight: bold; border: 1px solid #555; }
        .test-link { background: #2a475e; color: #66c0f4; padding: 5px 10px; text-decoration: none; border-radius: 3px; font-size: 12px; font-weight: bold; }
    </style>
</head>
<body>

<header>
    <h2 style="cursor:pointer" onclick="location.reload()">STEEL<span style="color:var(--main-blue)">STORE</span></h2>
    <div style="display:flex; gap:15px; align-items:center;">
        <span id="user-display" style="color:var(--safe); font-weight:bold;"></span>
        <button onclick="toggleModal('settings-modal')" id="btn-settings" style="display:none; background:#2a475e; color:white; border:none; padding:8px 15px; border-radius:3px; cursor:pointer;">‚öô –ö–∞–±–∏–Ω–µ—Ç</button>
        <button onclick="toggleModal('auth-modal')" id="btn-login-trigger" style="background:var(--main-blue); color:black; border:none; padding:8px 20px; border-radius:3px; cursor:pointer; font-weight:bold;">–í–û–ô–¢–ò</button>
    </div>
</header>

<div class="container">
    <div class="safe-banner">‚óè –°–¢–ê–¢–£–°: –û–ù–õ–ê–ô–ù ‚óè –ú–û–î–ï–†–ê–¢–û–†: MAXIMPRO609 ‚óè –í–ï–†–°–ò–Ø: 2.0</div>

    <div id="admin-mod-area" class="mod-section">
        <h3 style="color:orange; margin:0 0 10px 0;">üõ° –û—á–µ—Ä–µ–¥—å –º–æ–¥–µ—Ä–∞—Ü–∏–∏</h3>
        <div id="mod-queue-list"></div>
    </div>

    <div id="dev-section" class="publish-form" style="display:none;">
        <h3 style="margin:0 0 15px 0; color:var(--main-blue);">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</h3>
        <label>–ù–∞–∑–≤–∞–Ω–∏–µ –∏–≥—Ä—ã</label>
        <input type="text" id="g-name" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ...">
        
        <div style="display:flex; gap:10px; margin-top:15px;">
            <div style="flex:1;">
                <label>–ñ–∞–Ω—Ä</label>
                <select id="g-genre">
                    <option>–≠–∫—à–µ–Ω</option><option>–®—É—Ç–µ—Ä</option><option>–•–æ—Ä—Ä–æ—Ä</option><option>–°–∏–º—É–ª—è—Ç–æ—Ä</option>
                </select>
            </div>
            <div style="flex:1;">
                <label>–í–æ–∑—Ä–∞—Å—Ç</label>
                <select id="g-age">
                    <option>3+</option><option>7+</option><option>12+</option><option>16+</option><option>18+</option>
                </select>
            </div>
        </div>

        <label style="display:block; margin-top:15px;">–§–∞–π–ª –∏–≥—Ä—ã (.zip / .apk / .exe)</label>
        <input type="file" id="g-file-input">
        
        <button class="btn-pub" onclick="sendToModeration()">–û–¢–ü–†–ê–í–ò–¢–¨ –ù–ê –ü–†–û–í–ï–†–ö–£</button>
    </div>

    <h3>–í–∏—Ç—Ä–∏–Ω–∞ –∏–≥—Ä</h3>
    <div class="grid" id="game-grid"></div>
</div>

<div id="auth-modal" class="modal"><div class="modal-box">
    <h3 style="margin-top:0">–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</h3>
    <input type="text" id="reg-nick" placeholder="–ù–∏–∫–Ω–µ–π–º">
    <input type="password" id="reg-pass" placeholder="–ü–∞—Ä–æ–ª—å">
    <button class="btn-pub" onclick="login()">–í–û–ô–¢–ò</button>
    <button onclick="toggleModal('auth-modal')" style="width:100%; background:none; color:white; border:none; margin-top:10px; cursor:pointer;">–û—Ç–º–µ–Ω–∞</button>
</div></div>

<div id="settings-modal" class="modal"><div class="modal-box">
    <h3 style="margin-top:0">–ü—Ä–æ—Ñ–∏–ª—å</h3>
    <p id="profile-info" style="font-size:14px; color:var(--main-blue);"></p>
    <button onclick="requestDevStatus()" id="dev-btn-toggle" style="width:100%; padding:10px; margin-bottom:10px; cursor:pointer;">–†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞</button>
    <button onclick="logout()" style="width:100%; padding:10px; background:var(--error); color:white; border:none; cursor:pointer; border-radius:4px;">–í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞</button>
    <button class="btn-pub" onclick="toggleModal('settings-modal')" style="background:#233c51; color:white;">–ó–∞–∫—Ä—ã—Ç—å</button>
</div></div>

<script>
    function toggleModal(id) { document.getElementById(id).style.display = (document.getElementById(id).style.display === 'flex') ? 'none' : 'flex'; }

    // –õ–û–ì–ò–ù –° –ö–õ–Æ–ß–û–ú
    function login() {
        const n = document.getElementById('reg-nick').value;
        const p = document.getElementById('reg-pass').value;
        if(!n) return alert("–í–≤–µ–¥–∏—Ç–µ –Ω–∏–∫!");

        localStorage.setItem('user', n);

        if(n === "MaximPro609") {
            const key = prompt("–í–í–ï–î–ò–¢–ï –°–ï–ö–†–ï–¢–ù–´–ô –ö–õ–Æ–ß –ê–î–ú–ò–ù–ê:");
            if(key === "6783") {
                localStorage.setItem('isAdmin', 'true');
                alert("–î–æ—Å—Ç—É–ø –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω!");
            }
        }
        location.reload();
    }

    function logout() { localStorage.clear(); location.reload(); }
    function requestDevStatus() { localStorage.setItem('isDev', 'true'); location.reload(); }

    // –ú–û–î–ï–†–ê–¶–ò–Ø –ò –§–ê–ô–õ–´
    function sendToModeration() {
        const name = document.getElementById('g-name').value;
        const fileInput = document.getElementById('g-file-input');
        const file = fileInput.files[0];

        if(!name || !file) return alert("–ó–∞–ø–æ–ª–Ω–∏ –ø–æ–ª—è –∏ –≤—ã–±–µ—Ä–∏ —Ñ–∞–π–ª!");

        // –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—É—é —Å—Å—ã–ª–∫—É –Ω–∞ —Ñ–∞–π–ª –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
        const fakeUrl = URL.createObjectURL(file);

        const game = {
            id: Date.now(),
            name: name,
            genre: document.getElementById('g-genre').value,
            age: document.getElementById('g-age').value,
            author: localStorage.getItem('user'),
            fileData: fakeUrl, // –°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–∞–π–ª
            fileName: file.name
        };

        const queue = JSON.parse(localStorage.getItem('pending_queue') || '[]');
        queue.push(game);
        localStorage.setItem('pending_queue', JSON.stringify(queue));
        
        alert("–ò–≥—Ä–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞! –ù–µ –∑–∞–∫—Ä—ã–≤–∞–π —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–æ –æ–¥–æ–±—Ä–µ–Ω–∏—è, —á—Ç–æ–±—ã —Ñ–∞–π–ª –±—ã–ª –¥–æ—Å—Ç—É–ø–µ–Ω.");
        location.reload();
    }

    function approve(id) {
        let queue = JSON.parse(localStorage.getItem('pending_queue') || '[]');
        let store = JSON.parse(localStorage.getItem('my_store') || '[]');
        const game = queue.find(g => g.id === id);
        
        if(game) {
            store.push(game);
            localStorage.setItem('my_store', JSON.stringify(store));
            localStorage.setItem('pending_queue', JSON.stringify(queue.filter(g => g.id !== id)));
        }
        location.reload();
    }

    function reject(id) {
        let queue = JSON.parse(localStorage.getItem('pending_queue') || '[]');
        localStorage.setItem('pending_queue', JSON.stringify(queue.filter(g => g.id !== id)));
        location.reload();
    }

    function deleteGame(id) {
        if(confirm("–£–¥–∞–ª–∏—Ç—å –∏–≥—Ä—É –Ω–∞–≤—Å–µ–≥–¥–∞?")) {
            let store = JSON.parse(localStorage.getItem('my_store') || '[]');
            localStorage.setItem('my_store', JSON.stringify(store.filter(g => g.id !== id)));
            location.reload();
        }
    }

    // –ó–ê–ì–†–£–ó–ö–ê
    window.onload = function() {
        const user = localStorage.getItem('user');
        const isAdmin = localStorage.getItem('isAdmin');
        const isDev = localStorage.getItem('isDev');

        if(user) {
            document.getElementById('user-display').innerText = user;
            document.getElementById('btn-login-trigger').style.display = 'none';
            document.getElementById('btn-settings').style.display = 'block';
            document.getElementById('profile-info').innerText = `–ù–∏–∫: ${user} | –†–æ–ª—å: ${isAdmin ? '–ê–î–ú–ò–ù–ò–°–¢–†–ê–¢–û–†' : (isDev ? '–†–ê–ó–†–ê–ë–û–¢–ß–ò–ö' : '–ò–ì–†–û–ö')}`;
            
            if(isAdmin || isDev) {
                document.getElementById('dev-section').style.display = 'block';
                document.getElementById('dev-btn-toggle').style.display = 'none';
            }
        }

        // –û–¢–û–ë–†–ê–ñ–ï–ù–ò–ï –û–ß–ï–†–ï–î–ò –î–õ–Ø –ú–ê–ö–°–ê
        if(isAdmin) {
            document.getElementById('admin-mod-area').style.display = 'block';
            const queue = JSON.parse(localStorage.getItem('pending_queue') || '[]');
            const list = document.getElementById('mod-queue-list');
            
            if(queue.length === 0) list.innerHTML = "<p style='opacity:0.5'>–û—á–µ—Ä–µ–¥—å –ø—É—Å—Ç–∞...</p>";
            
            queue.forEach(g => {
                list.innerHTML += `
                    <div class="mod-item">
                        <span><b>${g.name}</b> –æ—Ç ${g.author}</span>
                        <div>
                            <a href="${g.fileData}" download="${g.fileName}" class="test-link">–¢–ï–°–¢ –§–ê–ô–õ–ê</a>
                            <button onclick="approve(${g.id})" style="background:var(--safe); border:none; padding:5px 10px; cursor:pointer; font-weight:bold;">–û–î–û–ë–†–ò–¢–¨</button>
                            <button onclick="reject(${g.id})" style="background:var(--error); border:none; padding:5px 10px; cursor:pointer; color:white;">X</button>
                        </div>
                    </div>`;
            });
        }

        // –í–ò–¢–†–ò–ù–ê
        const store = JSON.parse(localStorage.getItem('my_store') || '[]');
        store.forEach(g => {
            document.getElementById('game-grid').innerHTML += `
                <div class="card">
                    <div class="age-badge">${g.age}</div>
                    <h3 style="color:var(--main-blue); margin:0;">${g.name}</h3>
                    <p style="font-size:11px; opacity:0.6; margin:5px 0;">–ê–≤—Ç–æ—Ä: ${g.author} | ${g.genre}</p>
                    <a href="${g.fileData}" download="${g.fileName}" style="display:block; text-align:center; background:#233c51; color:white; text-decoration:none; padding:10px; border-radius:4px; margin-top:10px; font-weight:bold;">–°–ö–ê–ß–ê–¢–¨ –ü–ê–ö–ï–¢</a>
                    ${(isAdmin || user === g.author) ? `<button onclick="deleteGame(${g.id})" style="width:100%; margin-top:8px; background:none; color:var(--error); border:1px solid var(--error); font-size:10px; cursor:pointer; padding:3px;">–£–î–ê–õ–ò–¢–¨ –ò–ó –°–¢–û–†–ê</button>` : ''}
                </div>`;
        });
    };
</script>
</body>
</html>